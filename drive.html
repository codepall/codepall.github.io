<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codepall | Files Upload</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Montserrat', sans-serif;
  margin: 0;
  background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e, #0f3460);
  color: #e0e0e0;
  overflow-x: hidden;
}

.blur-overlay {
  position: fixed;
  inset: 0;
  backdrop-filter: blur(15px);
  z-index: -1;
}

header {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(25px);
  padding: 40px 20px;
  text-align: center;
  border-radius: 0 0 30px 30px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.1);
}

header h1 {
  margin: 0;
  font-size: 3em;
  color: #a8a8ff;
  text-shadow: 0 0 30px #a8a8ff;
}

header p {
  color: #c0c0ff;
}

nav {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  gap: 15px;
}

nav a {
  color: #c0c0ff;
  text-decoration: none;
  padding: 12px 22px;
  border-radius: 25px;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255,255,255,0.2);
}

nav a:hover {
  background: rgba(255,255,255,0.2);
}

.container {
  max-width: 1100px;
  margin: 50px auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 50px;
}

.glass-section {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(20px);
  padding: 40px;
  border-radius: 30px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.15);
}

.upload-box {
  border: 2px dashed rgba(168,168,255,0.4);
  border-radius: 25px;
  padding: 40px;
  text-align: center;
  cursor: pointer;
}

.upload-box.drag {
  background: rgba(255,255,255,0.12);
}

.upload-box h2 {
  color: #a8a8ff;
  text-shadow: 0 0 20px #a8a8ff;
}

input[type=file] {
  display: none;
}

.progress-list {
  margin-top: 25px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.progress-item {
  background: rgba(255,255,255,0.1);
  border-radius: 20px;
  padding: 10px 15px;
}

.progress-bar {
  height: 8px;
  border-radius: 10px;
  background: rgba(255,255,255,0.25);
  overflow: hidden;
  margin-top: 6px;
}

.progress {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #a8a8ff, #7b7bff);
  transition: width 0.3s ease;
}

/* STATUS SELESAI */
.upload-done {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
  font-size: 13px;
  color: #d8ccff;
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.upload-done.show {
  opacity: 1;
  transform: scale(1);
}

.upload-done span {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(168,168,255,0.25);
  border: 1px solid rgba(200,200,255,0.8);
  color: #ffffff;
  font-size: 12px;
}
</style>
</head>

<body>

<div class="blur-overlay"></div>

<header>
  <h1>Codepall</h1>
  <p>Upload your files!</p>
</header>

<div class="container">

<section id="upload" class="glass-section">
  <div class="upload-box" id="drop">
    <h2>Upload Files</h2>
    <p>Drag & drop file di sini atau klik</p>
  </div>

  <input type="file" id="file" multiple>
  <div class="progress-list" id="progressList"></div>
</section>

</div>

<script>
const drop = document.getElementById("drop");
const input = document.getElementById("file");
const list = document.getElementById("progressList");

drop.onclick = () => input.click();

drop.ondragover = e => {
  e.preventDefault();
  drop.classList.add("drag");
};

drop.ondragleave = () => drop.classList.remove("drag");

drop.ondrop = e => {
  e.preventDefault();
  drop.classList.remove("drag");
  handleFiles(e.dataTransfer.files);
};

input.onchange = () => handleFiles(input.files);

function handleFiles(files) {
  [...files].forEach(uploadFile);
}

function uploadFile(file) {
  const item = document.createElement("div");
  item.className = "progress-item";
  item.innerHTML = `
    <div>${file.name}</div>
    <div class="progress-bar">
      <div class="progress"></div>
    </div>
    <div class="upload-done">
      <span>âœ“</span>
      <div>Upload selesai</div>
    </div>
  `;
  list.appendChild(item);

  const bar = item.querySelector(".progress");
  const done = item.querySelector(".upload-done");
  const reader = new FileReader();

  reader.onload = () => {
    fetch("https://script.google.com/macros/s/AKfycbzxrj9SihiEGSnAzMyPOzrBlW79IB_J3K5Xh4MM11x_GfEo-x7cR26EIHT5wA-oUHXDpA/exec", {
      method: "POST",
      body: new URLSearchParams({
        file: reader.result.split(",")[1],
        name: file.name,
        type: file.type
      })
    }).then(() => {
      bar.style.width = "100%";
      done.classList.add("show");
    });
  };

  reader.onprogress = e => {
    if (e.lengthComputable) {
      bar.style.width = (e.loaded / e.total * 80) + "%";
    }
  };

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
